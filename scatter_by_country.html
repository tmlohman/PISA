<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <script src="http://d3js.org/d3.v3.min.js"></script>
  <script type="text/javascript" src="http://code.jquery.com/jquery-latest.min.js"></script>
  
    <script type="text/javascript">  
    
	function func(data) {
		data.map(function (d) {
							d.prob = +d.prob;
							d.escs = +d.escs;
							d.math = +d.math;
							d.reading = +d.reading;
							d.science = +d.science;
				});

		"use strict"
		var margin = 75
		width = 600 - margin
		height = 400 - margin
		
		var radius = 5
		
		
		var svg = d3.select("body")
					.append("svg")
					.attr("width", width + margin)
					.attr("height", height + margin)
					.append('g')
					.attr('class', 'chart');
					
		d3.select('svg')
		  .selectAll('circle')
		  .data(data.filter(function(d) { return d.country == country }))
		  .enter()
		  .append('circle') 
		  
		  
		  // horizontal axis
          var escs_extent = d3.extent(data, function(d) {
			  return d['escs'];
		  });
		  var escs_scale = d3.scale.linear()
			.range([margin, width])
			.domain(escs_extent);
		  var escs_axis = d3.svg.axis()
			.scale(escs_scale);
		  
		  // vertical axis
		  var score_extent = d3.extent(data, function(d) {
			  return d[subject];
		  });
          var score_scale = d3.scale.linear()
			.range([height/2, height])
			.domain(score_extent);
		  var score_axis = d3.svg.axis()
			.scale(score_scale)
			.orient("left");
			
		  // append svg to page corresponding to the d3 x-axis
		  d3.select("svg")
			.append('g')
			.attr('class', 'x axis')
			.attr('transform', "translate(0," + height + ")")
			.call(escs_axis);
		  
		  // append svg to page corresponding to the d3 y-axis	
		  d3.select("svg")
			.append('g')
			.attr('class', 'y axis')
			.attr('transform', "translate(" + margin + ",0)")
			.call(score_axis);
			
		  d3.selectAll('circle')
              .attr('cx', function(d) {
                  return escs_scale(d['escs']);
              })
              .attr('cy', function(d) {
                  return score_scale(d[subject]);
              })
              .attr('r', radius)
              .attr('fill', 'blue');
			
	}
	country = "South Korea"
	subject = "math"

	d3.csv("quintiles.csv", func)
    
    
    </script>
</body>
</html>
